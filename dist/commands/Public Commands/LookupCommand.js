"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const discord_akairo_1 = require("discord-akairo");
const config_1 = require("../../config");
const EmbedUtil_1 = require("../../utils/EmbedUtil");
const minecraft_player_1 = __importDefault(require("minecraft-player"));
class LookupCommand extends discord_akairo_1.Command {
    constructor() {
        super("lookup", {
            aliases: ["lookup", "who", "whois", "search", "find", "get"],
            category: "Public Commands",
            description: {
                content: "Find out the UUID/Username of a player.",
                usage: `${config_1.prefix}lookup [username/uuid]`,
                examples: [
                    `${config_1.prefix}lookup Reheight`,
                    `${config_1.prefix}lookup d4be07ab-fc80-46ca-8706-70947a8e9beb`
                ]
            },
            ratelimit: 3
        });
    }
    async exec(message, { identifier }) {
        if (message.channel.type == "dm")
            return await message.util.send(await EmbedUtil_1.BuildEmbed(this.client, `**Minecraft Genie**`, `*You are not able to run commands in DMs, you must be in a server!*`, [])).then(msg => {
                msg.delete({ timeout: 30000 });
            });
        let args = message.toString().split(" ").filter((value, index) => index !== 0);
        if (args.length < 1) {
            return await message.util.send(await EmbedUtil_1.BuildEmbed(this.client, "**Minecraft Genie**", "*You must provide a Username or UUID!*", [
                { name: `Usage`, value: `${this.description["usage"]}` },
                { name: `Examples`, value: `${this.description["examples"].join("\n")}` }
            ])).then(msg => {
                msg.delete({ timeout: 60000 });
            });
        }
        if (args.length > 1) {
            return await message.util.send(await EmbedUtil_1.BuildEmbed(this.client, "**Minecraft Genie**", "*You must provide only one argument!*", [
                { name: `Usage`, value: `${this.description["usage"]}` },
                { name: `Examples`, value: `${this.description["examples"].join("\n")}` }
            ])).then(msg => {
                msg.delete({ timeout: 60000 });
            });
        }
        const minecraftResponse = await minecraft_player_1.default(args[0]).catch(async (error) => {
            return await message.util.send(await EmbedUtil_1.BuildEmbed(this.client, "**Minecraft Genie**", `*You must provide a valid identifier!*\n**INVALID IDENTIFIER:** \`${args[0]}\``, [
                { name: `Usage`, value: `${this.description["usage"]}` },
                { name: `Examples`, value: `${this.description["examples"].join("\n")}` }
            ])).then(msg => {
                msg.delete({ timeout: 60000 });
            });
        });
        if (!minecraftResponse)
            return;
        return await message.util.send(await EmbedUtil_1.BuildEmbed(this.client, `**Minecraft Genie**`, `*Information of: \`${minecraftResponse["username"]}\`!*`, [
            { name: `UUID`, value: minecraftResponse["uuid"], inline: true }
        ])).then(async (msg) => {
            await msg.delete({ timeout: 60000 });
        });
    }
}
exports.default = LookupCommand;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTG9va3VwQ29tbWFuZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21tYW5kcy9QdWJsaWMgQ29tbWFuZHMvTG9va3VwQ29tbWFuZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLG1EQUF5QztBQUN6Qyx5Q0FBc0M7QUFFdEMscURBQW1EO0FBQ25ELHdFQUF5QztBQUV6QyxNQUFxQixhQUFjLFNBQVEsd0JBQU87SUFDOUM7UUFDSSxLQUFLLENBQUMsUUFBUSxFQUFFO1lBQ1osT0FBTyxFQUFFLENBQUMsUUFBUSxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxLQUFLLENBQUM7WUFDNUQsUUFBUSxFQUFFLGlCQUFpQjtZQUMzQixXQUFXLEVBQUU7Z0JBQ1QsT0FBTyxFQUFFLHlDQUF5QztnQkFDbEQsS0FBSyxFQUFFLEdBQUcsZUFBTSx3QkFBd0I7Z0JBQ3hDLFFBQVEsRUFBRTtvQkFDTixHQUFHLGVBQU0saUJBQWlCO29CQUMxQixHQUFHLGVBQU0sNkNBQTZDO2lCQUN6RDthQUNKO1lBQ0QsU0FBUyxFQUFFLENBQUM7U0FDZixDQUFDLENBQUM7SUFDUCxDQUFDO0lBRU0sS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFnQixFQUFFLEVBQUUsVUFBVSxFQUEwQjtRQUN0RSxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxJQUFJLElBQUk7WUFBRSxPQUFPLE1BQU0sT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxzQkFBVSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUscUJBQXFCLEVBQUUscUVBQXFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUU7Z0JBQ3pNLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQTtZQUNsQyxDQUFDLENBQUMsQ0FBQTtRQUVGLElBQUks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LGlCQUFpQixDQUFDLFVBQVUsQ0FBQyxNQUFNLEVBQUU7WUFDM0ksRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO1NBQ25FLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsR0FBRyxFQUFFLEVBQUU7WUFDbkIsTUFBTSxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7UUFDekMsQ0FBQyxDQUFDLENBQUE7SUFDTixDQUFDO0NBQ0o7QUEzREQsZ0NBMkRDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gXCJkaXNjb3JkLWFrYWlyb1wiO1xyXG5pbXBvcnQgeyBwcmVmaXggfSBmcm9tIFwiLi4vLi4vY29uZmlnXCI7XHJcbmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tIFwiZGlzY29yZC5qc1wiO1xyXG5pbXBvcnQgeyBCdWlsZEVtYmVkIH0gZnJvbSBcIi4uLy4uL3V0aWxzL0VtYmVkVXRpbFwiO1xyXG5pbXBvcnQgTWluZWNyYWZ0IGZyb20gXCJtaW5lY3JhZnQtcGxheWVyXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb29rdXBDb21tYW5kIGV4dGVuZHMgQ29tbWFuZCB7XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoXCJsb29rdXBcIiwge1xyXG4gICAgICAgICAgICBhbGlhc2VzOiBbXCJsb29rdXBcIiwgXCJ3aG9cIiwgXCJ3aG9pc1wiLCBcInNlYXJjaFwiLCBcImZpbmRcIiwgXCJnZXRcIl0sXHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiBcIlB1YmxpYyBDb21tYW5kc1wiLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgY29udGVudDogXCJGaW5kIG91dCB0aGUgVVVJRC9Vc2VybmFtZSBvZiBhIHBsYXllci5cIixcclxuICAgICAgICAgICAgICAgIHVzYWdlOiBgJHtwcmVmaXh9bG9va3VwIFt1c2VybmFtZS91dWlkXWAsXHJcbiAgICAgICAgICAgICAgICBleGFtcGxlczogW1xyXG4gICAgICAgICAgICAgICAgICAgIGAke3ByZWZpeH1sb29rdXAgUmVoZWlnaHRgLFxyXG4gICAgICAgICAgICAgICAgICAgIGAke3ByZWZpeH1sb29rdXAgZDRiZTA3YWItZmM4MC00NmNhLTg3MDYtNzA5NDdhOGU5YmViYFxyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICByYXRlbGltaXQ6IDNcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZXhlYyhtZXNzYWdlOiBNZXNzYWdlLCB7IGlkZW50aWZpZXIgfTogeyBpZGVudGlmaWVyOiBzdHJpbmcgfSk6IFByb21pc2U8YW55PiB7XHJcbiAgICAgICAgaWYgKG1lc3NhZ2UuY2hhbm5lbC50eXBlID09IFwiZG1cIikgcmV0dXJuIGF3YWl0IG1lc3NhZ2UudXRpbC5zZW5kKGF3YWl0IEJ1aWxkRW1iZWQodGhpcy5jbGllbnQsIGAqKk1pbmVjcmFmdCBHZW5pZSoqYCwgYCpZb3UgYXJlIG5vdCBhYmxlIHRvIHJ1biBjb21tYW5kcyBpbiBETXMsIHlvdSBtdXN0IGJlIGluIGEgc2VydmVyISpgLCBbXSkpLnRoZW4obXNnID0+IHtcclxuICAgICAgICAgICAgbXNnLmRlbGV0ZSh7IHRpbWVvdXQ6IDMwMDAwIH0pXHJcbiAgICAgICAgfSlcclxuICAgICAgICBcclxuICAgICAgICBsZXQgYXJnczogc3RyaW5nW10gPSBtZXNzYWdlLnRvU3RyaW5nKCkuc3BsaXQoXCIgXCIpLmZpbHRlcigodmFsdWU6IHN0cmluZywgaW5kZXg6IG51bWJlcikgPT4gaW5kZXggIT09IDApO1xyXG5cclxuICAgICAgICBpZiAoYXJncy5sZW5ndGggPCAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBtZXNzYWdlLnV0aWwuc2VuZChhd2FpdCBCdWlsZEVtYmVkKHRoaXMuY2xpZW50LCBcIioqTWluZWNyYWZ0IEdlbmllKipcIiwgXCIqWW91IG11c3QgcHJvdmlkZSBhIFVzZXJuYW1lIG9yIFVVSUQhKlwiLCBbXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6IGBVc2FnZWAsIHZhbHVlOiBgJHt0aGlzLmRlc2NyaXB0aW9uW1widXNhZ2VcIl19YCB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiBgRXhhbXBsZXNgLCB2YWx1ZTogYCR7dGhpcy5kZXNjcmlwdGlvbltcImV4YW1wbGVzXCJdLmpvaW4oXCJcXG5cIil9YCB9XHJcbiAgICAgICAgICAgIF0pKS50aGVuKG1zZyA9PiB7XHJcbiAgICAgICAgICAgICAgICBtc2cuZGVsZXRlKHsgdGltZW91dDogNjAwMDAgfSlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoYXJncy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBtZXNzYWdlLnV0aWwuc2VuZChhd2FpdCBCdWlsZEVtYmVkKHRoaXMuY2xpZW50LCBcIioqTWluZWNyYWZ0IEdlbmllKipcIiwgXCIqWW91IG11c3QgcHJvdmlkZSBvbmx5IG9uZSBhcmd1bWVudCEqXCIsIFtcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogYFVzYWdlYCwgdmFsdWU6IGAke3RoaXMuZGVzY3JpcHRpb25bXCJ1c2FnZVwiXX1gIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6IGBFeGFtcGxlc2AsIHZhbHVlOiBgJHt0aGlzLmRlc2NyaXB0aW9uW1wiZXhhbXBsZXNcIl0uam9pbihcIlxcblwiKX1gIH1cclxuICAgICAgICAgICAgXSkpLnRoZW4obXNnID0+IHtcclxuICAgICAgICAgICAgICAgIG1zZy5kZWxldGUoeyB0aW1lb3V0OiA2MDAwMCB9KVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgbWluZWNyYWZ0UmVzcG9uc2U6IGFueSA9IGF3YWl0IE1pbmVjcmFmdChhcmdzWzBdKS5jYXRjaChhc3luYyAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IG1lc3NhZ2UudXRpbC5zZW5kKGF3YWl0IEJ1aWxkRW1iZWQodGhpcy5jbGllbnQsIFwiKipNaW5lY3JhZnQgR2VuaWUqKlwiLCBgKllvdSBtdXN0IHByb3ZpZGUgYSB2YWxpZCBpZGVudGlmaWVyISpcXG4qKklOVkFMSUQgSURFTlRJRklFUjoqKiBcXGAke2FyZ3NbMF19XFxgYCwgW1xyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiBgVXNhZ2VgLCB2YWx1ZTogYCR7dGhpcy5kZXNjcmlwdGlvbltcInVzYWdlXCJdfWAgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogYEV4YW1wbGVzYCwgdmFsdWU6IGAke3RoaXMuZGVzY3JpcHRpb25bXCJleGFtcGxlc1wiXS5qb2luKFwiXFxuXCIpfWAgfVxyXG4gICAgICAgICAgICBdKSkudGhlbihtc2cgPT4ge1xyXG4gICAgICAgICAgICAgICAgbXNnLmRlbGV0ZSh7IHRpbWVvdXQ6IDYwMDAwIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGlmICghbWluZWNyYWZ0UmVzcG9uc2UpIHJldHVybjtcclxuXHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IG1lc3NhZ2UudXRpbC5zZW5kKGF3YWl0IEJ1aWxkRW1iZWQodGhpcy5jbGllbnQsIGAqKk1pbmVjcmFmdCBHZW5pZSoqYCwgYCpJbmZvcm1hdGlvbiBvZjogXFxgJHttaW5lY3JhZnRSZXNwb25zZVtcInVzZXJuYW1lXCJdfVxcYCEqYCwgW1xyXG4gICAgICAgICAgICB7IG5hbWU6IGBVVUlEYCwgdmFsdWU6IG1pbmVjcmFmdFJlc3BvbnNlW1widXVpZFwiXSwgaW5saW5lOiB0cnVlIH1cclxuICAgICAgICBdKSkudGhlbihhc3luYyAobXNnKSA9PiB7XHJcbiAgICAgICAgICAgIGF3YWl0IG1zZy5kZWxldGUoeyB0aW1lb3V0OiA2MDAwMCB9KTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59XHJcbiJdfQ==